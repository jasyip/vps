services:
  caddy:
    volumes:
      - ./caddy/Caddyfile:/etc/caddy/Caddyfile:ro
      - ./caddy/site:/srv:ro
    environment:
      EXTRA_DIRECTIVES: "import development"

  crowdsec:
    environment:
      LEVEL_DEBUG: "true"

  grafana:
    ports:
      - 3000:3000
    environment:
      GF_LOG_LEVEL: debug
      GF_SERVER_DOMAIN: "${SUBDOMAIN_GRAFANA}.localhost"
    volumes:
      - ./grafana/grafana.ini:/etc/grafana/grafana.ini:ro

  authelia:
    environment:
      AUTHELIA_LOG_LEVEL: debug
      AUTHELIA_DEFAULT_REDIRECTION_URL: "https://${SUBDOMAIN_AUTHELIA}.localhost"
      AUTHELIA_SESSION_DOMAIN: "https://${SUBDOMAIN_AUTHELIA}.localhost"
    # volumes:
    #   - ./authelia/configuration.yml:/config/configuration.yml:ro

  # radicale:
  #   ports:
  #     - 127.0.0.1:5232:5232

  # ejabberd:
  #   ports:
  #     - 127.0.0.1:5222:5222
  #     - 127.0.0.1:5269:5269
  #     - 127.0.0.1:5280:5280
  #     - 127.0.0.1:5443:5443
  #     - 127.0.0.1:1883:1883

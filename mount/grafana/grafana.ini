[server]
enable_gzip = true
enforce_domain = true
router_logging = true
domain = ${SUBDOMAIN}.${DOMAIN}
root_url = https://${SUBDOMAIN}.${DOMAIN}${REDIRECTION_AUTHORITY_SUFFIX}

[database]
type = postgres
host = /run/postgresql
name = ${MODE}_grafana
user = ${MODE}_grafana
password = $__file{/run/secrets/postgresql_password}

[analytics]
reporting_enabled = false

[security]
disable_gravatar = true
cookie_secure = true
cookie_samesite = strict
content_security_policy = true

[metrics]
enabled = true
basic_auth_username = prometheus
basic_auth_password = $__file{/run/secrets/metrics_password}

[auth.generic_oauth]
enabled = true
name = Authelia
client_id = authelia
client_secret = insecure_secret
scopes = openid profile email groups
empty_scopes = false
auth_url = https://auth.example.com/api/oidc/authorization
token_url = https://auth.example.com/api/oidc/token
api_url = https://auth.example.com/api/oidc/userinfo
login_attribute_path = preferred_username
groups_attribute_path = groups
name_attribute_path = name
use_pkce = true

services:
  caddy:
    extends:
      file: ../../compose.yaml.d/compose.yaml
      service: common
    volumes:
      - ./caddy/Caddyfile:/etc/caddy/Caddyfile:ro
      - type: bind
        source: ../site
        target: /srv
        read_only: true
    environment:
      LOCALHOST: "${LOCALHOST:-localhost}"
      CROWDSEC_BOUNCER_KEY: "$PRODUCTION_CROWDSEC_BOUNCER_KEY_CADDY"
